#!/usr/bin/ruby --disable-gems

lib = File.expand_path("../../lib", __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)

require 'dex/ui'
require 'spotify/api'

mappings = {
  'next' => :next,
  'n' => :next,
  'previous' => :previous,
  'pr' => :previous,
  'set_pos' => :set_pos,
  'pos' => :set_pos,
  'replay' => :replay,
  'rep' => :replay,
  'restart' => :replay,
  'pause' => :pause,
  'stop' => :pause,
  'play' => :play_pause,
  'p' => :play_pause,
  'play_pause' => :play_pause,
  'status' => :status,
  's' => :status,
  'help' => :help
}

if ARGV.empty?
  Spotify::Api.status
else
  mapping = mappings[ARGV.first]
  if mapping.nil? || mapping == :help
    Spotify::Api.help(mappings)
  else
    Spotify::Api.send(mapping)
  end
end
